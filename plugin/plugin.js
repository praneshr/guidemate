!function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=4)}([function(e,t,r){"use strict";var a,n,o;r.d(t,"c",function(){return a}),r.d(t,"b",function(){return n}),r.d(t,"a",function(){return o}),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.LEFT=1]="LEFT",e[e.VERTICAL_CENTER=2]="VERTICAL_CENTER",e[e.RIGHT=3]="RIGHT",e[e.TOP=4]="TOP",e[e.HORIZONTAL_CENTER=5]="HORIZONTAL_CENTER",e[e.BOTTOM=6]="BOTTOM",e[e.CLEAR=7]="CLEAR"}(a||(a={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SHORTCUTS=1]="SHORTCUTS",e[e.ADD_GUIDES=2]="ADD_GUIDES"}(n||(n={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.LEFT_MARGIN=1]="LEFT_MARGIN",e[e.RIGHT_MARGIN=2]="RIGHT_MARGIN",e[e.TOP_MARGIN=3]="TOP_MARGIN",e[e.BOTTOM_MARGIN=4]="BOTTOM_MARGIN",e[e.NO_OF_COLUMNS=5]="NO_OF_COLUMNS",e[e.NO_OF_ROWS=6]="NO_OF_ROWS",e[e.WIDTH=7]="WIDTH",e[e.HEIGHT=8]="HEIGHT",e[e.VERTICAL_GUTTER=9]="VERTICAL_GUTTER",e[e.HORIZONTAL_GUTTER=10]="HORIZONTAL_GUTTER"}(o||(o={}))},,,,function(e,t,r){"use strict";r.r(t);var a=r(0);figma.showUI(__html__),figma.ui.resize(350,370);const n=(e,t)=>{const r=({axis:e,offset:t})=>`${e}_${t}`,a=e.guides.map(r),n=t.filter(e=>!a.includes(r(e)));e.guides=e.guides.concat(n)},o=e=>"FRAME"===e.type?e:o(e.parent),s=()=>{const{selection:e}=figma.currentPage,t=e[0];if(t)return t;const r=figma.currentPage.findAll(e=>"FRAME"===e.type);if(1===r.length)return r[0];if(r.length>1)throw Error("Multiple frames detected. Select one layer or frame to use Guide Mate.");throw Error("Add at least one frame to use Guide Mate.")},i=(e,t,r,a,n)=>{const o=[];let s=r+t;for(let r=0;r<e;r++)1!==r&&r!==e&&(o.push({axis:n,offset:s}),a?(o.push({axis:n,offset:s+a}),s=s+a+t):s+=t);return o};figma.ui.onmessage=e=>{switch(e.type){case a.b.SHORTCUTS:(e=>{const t=s(),r=o(t),{width:i,height:u,x:f,y:T}=t,c=r===t,O=c?0:f,R=c?0:T;let N;switch(e){case a.c.LEFT:N={axis:"X",offset:O};break;case a.c.RIGHT:N={axis:"X",offset:O+i};break;case a.c.VERTICAL_CENTER:N={axis:"X",offset:O+i/2};break;case a.c.TOP:N={axis:"Y",offset:R};break;case a.c.HORIZONTAL_CENTER:N={axis:"Y",offset:R+u/2};break;case a.c.BOTTOM:N={axis:"Y",offset:R+u};break;case a.c.CLEAR:return void(r.guides=[]);default:console.warn(`Unhandled shortcut: ${e}`)}n(r,[N])})(e.data);break;case a.b.ADD_GUIDES:(e=>{const t=s(),r=o(t),{width:u,height:f,x:T,y:c}=t,O=r===t,R=O?0:T,N=O?0:c,_=e.reduce((e,{id:t,value:r})=>Object.assign({},e,{[t]:r}),{}),l=e.map(({id:e,value:t})=>{switch(e){case a.a.TOP_MARGIN:return{axis:"Y",offset:N+t};case a.a.BOTTOM_MARGIN:return{axis:"Y",offset:N+(f-t)};case a.a.LEFT_MARGIN:return{axis:"X",offset:R+t};case a.a.RIGHT_MARGIN:return{axis:"X",offset:R+(u-t)};default:return}}).filter(Boolean),d=_[a.a.HORIZONTAL_GUTTER],E=_[a.a.VERTICAL_GUTTER],I=_[a.a.LEFT_MARGIN],A=_[a.a.RIGHT_MARGIN],M=_[a.a.TOP_MARGIN],G=_[a.a.BOTTOM_MARGIN],p=_[a.a.NO_OF_COLUMNS],b=_[a.a.NO_OF_ROWS],L=Math.round((u-(I+A+(p-1)*E))/p),g=Math.round((f-(M+G+(b-1)*d))/b),U=i(p,L,R+I,E,"X"),h=i(b,g,N+M,d,"Y");n(r,[...l,...U,...h])})(e.data);break;default:console.warn(`Unhandled message type: ${e.type}`)}}}]);